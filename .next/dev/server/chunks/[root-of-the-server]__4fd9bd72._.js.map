{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///home/kleuvyn/Documentos/MeusRepositorios/Calendario_Literario/lib/db.ts"],"sourcesContent":["import { Pool } from 'pg';\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL || process.env.POSTGRES_URL,\n  ssl: {\n    rejectUnauthorized: false \n  }\n});\n\nexport async function executeQuery(query: string, params: any[] = []) {\n  try {\n    await pool.query('ALTER TABLE users ADD COLUMN IF NOT EXISTS password TEXT;');\n\n    const result = await pool.query(query, params);\n    return result.rows; \n  } catch (error) {\n    console.error('Erro detalhado no Banco de Dados:', error);\n    throw error;\n  }\n}"],"names":[],"mappings":";;;;AAAA;;;;;;AAEA,MAAM,OAAO,IAAI,4GAAI,CAAC;IACpB,kBAAkB,QAAQ,GAAG,CAAC,YAAY,IAAI,QAAQ,GAAG,CAAC,YAAY;IACtE,KAAK;QACH,oBAAoB;IACtB;AACF;AAEO,eAAe,aAAa,KAAa,EAAE,SAAgB,EAAE;IAClE,IAAI;QACF,MAAM,KAAK,KAAK,CAAC;QAEjB,MAAM,SAAS,MAAM,KAAK,KAAK,CAAC,OAAO;QACvC,OAAO,OAAO,IAAI;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qCAAqC;QACnD,MAAM;IACR;AACF"}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":["file:///home/kleuvyn/Documentos/MeusRepositorios/Calendario_Literario/app/api/register/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { executeQuery } from \"@/lib/db\"\nimport bcrypt from \"bcrypt\"\n\nexport async function POST(request: Request) {\n  try {\n    const { name, email, password } = await request.json()\n\n    const existingUsers = await executeQuery(\n      \"SELECT * FROM users WHERE email = $1\",\n      [email]\n    ) as any[]\n\n    if (existingUsers.length > 0) {\n      const user = existingUsers[0]\n\n      return NextResponse.json(\n        { error: \"Este e-mail já está em uso. Se você usou o Google, continue fazendo login pelo Google.\" },\n        { status: 400 }\n      )\n    }\n\n    const hashedPassword = await bcrypt.hash(password, 10)\n    await executeQuery(\n      `INSERT INTO users (name, email, password) VALUES ($1, $2, $3)`,\n      [name, email, hashedPassword]\n    )\n\n    return NextResponse.json({ message: \"Usuário registrado com sucesso!\" }, { status: 201 })\n  } catch (error: any) {\n    console.error(\"Erro no Registro:\", error)\n    return NextResponse.json({ error: \"Erro interno no servidor\" }, { status: 500 })\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEpD,MAAM,gBAAgB,MAAM,IAAA,2HAAY,EACtC,wCACA;YAAC;SAAM;QAGT,IAAI,cAAc,MAAM,GAAG,GAAG;YAC5B,MAAM,OAAO,aAAa,CAAC,EAAE;YAE7B,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAyF,GAClG;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,iBAAiB,MAAM,gHAAM,CAAC,IAAI,CAAC,UAAU;QACnD,MAAM,IAAA,2HAAY,EAChB,CAAC,6DAA6D,CAAC,EAC/D;YAAC;YAAM;YAAO;SAAe;QAG/B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAkC,GAAG;YAAE,QAAQ;QAAI;IACzF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA2B,GAAG;YAAE,QAAQ;QAAI;IAChF;AACF"}}]
}