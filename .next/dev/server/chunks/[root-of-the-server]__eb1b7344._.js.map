{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///home/kleuvyn/Documentos/MeusRepositorios/Calendario_Literario/lib/db.ts"],"sourcesContent":["import { Pool } from 'pg';\n\nconsole.log(\"Conectando ao banco:\", process.env.DB_NAME, \"no host:\", process.env.DB_HOST);\n\nconst pool = new Pool({\n  host: process.env.DB_HOST,\n  port: parseInt(process.env.DB_PORT || '5432'),\n  database: process.env.DB_NAME,\n  user: process.env.DB_USER,\n  password: process.env.DB_PASSWORD,\n  options: \"-c search_path=public\"\n});\n\nexport async function executeQuery(query: string, params: any[] = []) {\n  try {\n    const result = await pool.query(query, params);\n    return result.rows; \n  } catch (error) {\n    console.error('Erro detalhado no Banco de Dados:', error);\n    throw error;\n  }\n}"],"names":[],"mappings":";;;;AAAA;;;;;;AAEA,QAAQ,GAAG,CAAC,wBAAwB,QAAQ,GAAG,CAAC,OAAO,EAAE,YAAY,QAAQ,GAAG,CAAC,OAAO;AAExF,MAAM,OAAO,IAAI,4GAAI,CAAC;IACpB,MAAM,QAAQ,GAAG,CAAC,OAAO;IACzB,MAAM,SAAS,QAAQ,GAAG,CAAC,OAAO,IAAI;IACtC,UAAU,QAAQ,GAAG,CAAC,OAAO;IAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO;IACzB,UAAU,QAAQ,GAAG,CAAC,WAAW;IACjC,SAAS;AACX;AAEO,eAAe,aAAa,KAAa,EAAE,SAAgB,EAAE;IAClE,IAAI;QACF,MAAM,SAAS,MAAM,KAAK,KAAK,CAAC,OAAO;QACvC,OAAO,OAAO,IAAI;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qCAAqC;QACnD,MAAM;IACR;AACF"}},
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///home/kleuvyn/Documentos/MeusRepositorios/Calendario_Literario/app/api/reading-data/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { executeQuery } from \"@/lib/db\";\n\nexport async function GET(request: Request) {\n  const { searchParams } = new URL(request.url);\n  const email = searchParams.get(\"email\");\n\n  if (!email) return NextResponse.json({ data: [] });\n\n  try {\n    // Busca as leituras usando a coluna 'email' (ajustado conforme seu erro de banco)\n    const data = await executeQuery(\n      \"SELECT * FROM reading_data WHERE email = $1 ORDER BY start_date ASC\",\n      [email]\n    );\n    return NextResponse.json({ data: data || [] });\n  } catch (error: any) {\n    console.error(\"Erro no Banco de Dados:\", error.message);\n    return NextResponse.json({ error: error.message, data: [] }, { status: 500 });\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json();\n    const { email, bookName, action } = body;\n\n    if (action === \"START_READING\") {\n      await executeQuery(\n        \"INSERT INTO reading_data (email, book_name, status, start_date) VALUES ($1, $2, 'lendo', NOW())\",\n        [email, bookName]\n      );\n    } else if (action === \"FINISH_READING\") {\n      await executeQuery(\n        \"UPDATE reading_data SET status = 'concluido', end_date = NOW() WHERE email = $1 AND book_name = $2 AND status = 'lendo'\",\n        [email, bookName]\n      );\n    }\n    return NextResponse.json({ success: true });\n  } catch (error: any) {\n    return NextResponse.json({ error: error.message }, { status: 500 });\n  }\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;;AAEO,eAAe,IAAI,OAAgB;IACxC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,QAAQ,aAAa,GAAG,CAAC;IAE/B,IAAI,CAAC,OAAO,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,MAAM,EAAE;IAAC;IAEhD,IAAI;QACF,kFAAkF;QAClF,MAAM,OAAO,MAAM,IAAA,2HAAY,EAC7B,uEACA;YAAC;SAAM;QAET,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,MAAM,QAAQ,EAAE;QAAC;IAC9C,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,2BAA2B,MAAM,OAAO;QACtD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;YAAE,MAAM,EAAE;QAAC,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG;QAEpC,IAAI,WAAW,iBAAiB;YAC9B,MAAM,IAAA,2HAAY,EAChB,mGACA;gBAAC;gBAAO;aAAS;QAErB,OAAO,IAAI,WAAW,kBAAkB;YACtC,MAAM,IAAA,2HAAY,EAChB,2HACA;gBAAC;gBAAO;aAAS;QAErB;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC3C,EAAE,OAAO,OAAY;QACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;AACF"}}]
}